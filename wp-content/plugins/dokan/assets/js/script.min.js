jQuery(function(a){function b(a,b,c){jQuery('<div class="chart-tooltip">'+c+"</div>").css({top:b-16,left:a+20}).appendTo("body").fadeIn(200)}a(".datepicker").datepicker({dateFormat:"yy-mm-dd"}),a(".tips").tooltip();var c=a("ul.dokan-dashboard-menu"),d=a(".dokan-dashboard-content");a(window).width()>767&&d.height()>c.height()&&c.css({height:d.height()});var e=null,f=null;jQuery(".chart-placeholder").bind("plothover",function(a,c,d){if(d){if((e!=d.dataIndex||f!=d.seriesIndex)&&(e=d.dataIndex,f=d.seriesIndex,jQuery(".chart-tooltip").remove(),d.series.points.show||d.series.enable_tooltip)){var g=d.series.data[d.dataIndex][1];tooltip_content="",d.series.prepend_label&&(tooltip_content=tooltip_content+d.series.label+": "),d.series.prepend_tooltip&&(tooltip_content+=d.series.prepend_tooltip),tooltip_content+=g,d.series.append_tooltip&&(tooltip_content+=d.series.append_tooltip),d.series.pie.show?b(c.pageX,c.pageY,tooltip_content):b(d.pageX,d.pageY,tooltip_content)}}else jQuery(".chart-tooltip").remove(),e=null})}),jQuery(function(a){a(".user-role input[type=radio]").on("change",function(){var b=a(this).val();"seller"===b?(a(".show_if_seller").slideDown(),a(".tc_check_box").length>0&&a("input[name=register]").attr("disabled","disabled")):(a(".show_if_seller").slideUp(),a(".tc_check_box").length>0&&a("input[name=register]").removeAttr("disabled"))}),a(".tc_check_box").on("click",function(){var b=a(this).val();console.log(b),a(this).prop("checked")?(a("input[name=register]").removeAttr("disabled"),a("input[name=dokan_migration]").removeAttr("disabled")):(a("input[name=register]").attr("disabled","disabled"),a("input[name=dokan_migration]").attr("disabled","disabled"))}),a(".tc_check_box").length>0&&a("input[name=dokan_migration]").attr("disabled","disabled"),a("#company-name").on("focusout",function(){var b=a(this).val().toLowerCase().replace(/-+/g,"").replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");a("#seller-url").val(b),a("#url-alart").text(b),a("#seller-url").focus()}),a("#seller-url").keydown(function(b){a(this).val();-1!==a.inArray(b.keyCode,[46,8,9,27,13,91,109,110,173,189,190])||65==b.keyCode&&b.ctrlKey===!0||b.keyCode>=35&&b.keyCode<=39||(b.shiftKey||(b.keyCode<65||b.keyCode>90)&&(b.keyCode<48||b.keyCode>57))&&(b.keyCode<96||b.keyCode>105)&&b.preventDefault()}),a("#seller-url").keyup(function(b){a("#url-alart").text(a(this).val())}),a("#shop-phone").keydown(function(b){-1!==a.inArray(b.keyCode,[46,8,9,27,13,91,107,109,110,187,189,190])||65==b.keyCode&&b.ctrlKey===!0||b.keyCode>=35&&b.keyCode<=39||(b.shiftKey||b.keyCode<48||b.keyCode>57)&&(b.keyCode<96||b.keyCode>105)&&b.preventDefault()}),a("#seller-url").on("focusout",function(){var b=a(this),c={action:"shop_url",url_slug:b.val(),_nonce:dokan.nonce};if(""!==b.val()){var d=b.closest(".form-row");d.block({message:null,overlayCSS:{background:"#fff url("+dokan.ajax_loader+") no-repeat center",opacity:.6}}),a.post(dokan.ajaxurl,c,function(b){0==b?(a("#url-alart").removeClass("text-success").addClass("text-danger"),a("#url-alart-mgs").removeClass("text-success").addClass("text-danger").text(dokan.seller.notAvailable)):(a("#url-alart").removeClass("text-danger").addClass("text-success"),a("#url-alart-mgs").removeClass("text-danger").addClass("text-success").text(dokan.seller.available)),d.unblock()})}})}),function(a){a.validator.setDefaults({ignore:":hidden"});var b=function(b,c){var d=a(c).closest(".form-group");d.addClass("has-error").append(b)},c=function(b,c){a(c).closest(".form-group").removeClass("has-error")},d={init:function(){var b=this;return a("a.dokan-banner-drag").on("click",this.imageUpload),a("a.dokan-remove-banner-image").on("click",this.removeBanner),a("a.dokan-gravatar-drag").on("click",this.gragatarImageUpload),a("a.dokan-remove-gravatar-image").on("click",this.removeGravatar),this.validateForm(b),!1},imageUpload:function(b){b.preventDefault();var c,d=a(this);return c?void c.open():(c=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1}),c.on("select",function(){var a=c.state().get("selection").first().toJSON(),b=d.closest(".dokan-banner");b.find("input.dokan-file-field").val(a.id),b.find("img.dokan-banner-img").attr("src",a.url),d.parent().siblings(".image-wrap",b).removeClass("dokan-hide"),d.parent(".button-area").addClass("dokan-hide")}),void c.open())},gragatarImageUpload:function(b){b.preventDefault();var c,d=a(this);return c?void c.open():(c=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1}),c.on("select",function(){var a=c.state().get("selection").first().toJSON(),b=d.closest(".dokan-gravatar");b.find("input.dokan-file-field").val(a.id),b.find("img.dokan-gravatar-img").attr("src",a.url),d.parent().siblings(".gravatar-wrap",b).removeClass("dokan-hide"),d.parent(".gravatar-button-area").addClass("dokan-hide")}),void c.open())},submitSettings:function(b){"undefined"!=typeof tinyMCE&&tinyMCE.triggerSave();var c=a("form#"+b),d=c.serialize()+"&action=dokan_settings&form_id="+b;c.find(".ajax_prev").append('<span class="dokan-loading"> </span>'),a.post(dokan.ajaxurl,d,function(b){c.find("span.dokan-loading").remove(),a("html,body").animate({scrollTop:100}),b.success?(a(".dokan-ajax-response").html(a("<div/>",{"class":"dokan-alert dokan-alert-success",html:"<p>"+b.data.msg+"</p>"})),a(".dokan-ajax-response").append(b.data.progress)):a(".dokan-ajax-response").html(a("<div/>",{"class":"dokan-alert dokan-alert-danger",html:"<p>"+b.data+"</p>"}))})},validateForm:function(d){a("form#settings-form, form#profile-form, form#store-form, form#payment-form").validate({submitHandler:function(a){d.submitSettings(a.getAttribute("id"))},errorElement:"span",errorClass:"error",errorPlacement:b,success:c})},removeBanner:function(b){b.preventDefault();var c=a(this),d=c.closest(".image-wrap"),e=d.siblings(".button-area");d.find("input.dokan-file-field").val("0"),d.addClass("dokan-hide"),e.removeClass("dokan-hide")},removeGravatar:function(b){b.preventDefault();var c=a(this),d=c.closest(".gravatar-wrap"),e=d.siblings(".gravatar-button-area");d.find("input.dokan-file-field").val("0"),d.addClass("dokan-hide"),e.removeClass("dokan-hide")}},e={init:function(){var a=this;this.withdrawValidate(a)},withdrawValidate:function(d){a("form.withdraw").validate({errorElement:"span",errorClass:"error",errorPlacement:b,success:c})}},f={init:function(){var a=this;this.couponsValidation(a)},couponsValidation:function(d){a("form.coupons").validate({errorElement:"span",errorClass:"error",errorPlacement:b,success:c})}},g={init:function(){this.validate(this)},validate:function(d){a("form#dokan-form-contact-seller").validate({errorPlacement:b,success:c,submitHandler:function(b){a(b).block({message:null,overlayCSS:{background:"#fff url("+dokan.ajax_loader+") no-repeat center",opacity:.6}});var c=a(b).serialize();a.post(dokan.ajaxurl,c,function(c){a(b).unblock(),"undefined"!=typeof c.data&&a(b).find(".ajax-response").html(c.data),a(b).find("input[type=text], input[type=email], textarea").val("").removeClass("valid")})}})}},h={init:function(){this.validate(this)},validate:function(d){a("form.register").validate({errorPlacement:b,success:c,submitHandler:function(a){a.submit()}})}};a(function(){d.init(),e.init(),f.init(),g.init(),h.init()})}(jQuery),function(a){a(document).ready(function(){a(".dokan-shipping-location-wrapper").on("change",".dps_country_selection",function(){var b=a(this),c={country_id:b.find(":selected").val(),action:"dps_select_state_by_country"};""==b.val()||"everywhere"==b.val()?b.closest(".dps-shipping-location-content").find("table.dps-shipping-states tbody").html(""):a.post(dokan.ajaxurl,c,function(a){a.success&&b.closest(".dps-shipping-location-content").find("table.dps-shipping-states tbody").html(a.data)})})})}(jQuery),function(a){a(document).ready(function(){a(".dps-main-wrapper").on("click","a.dps-shipping-add",function(b){b.preventDefault(),html=a("#dps-shipping-hidden-lcoation-content");var c=a(html).first().clone().appendTo(a(".dokan-shipping-location-wrapper")).show();a(".dokan-shipping-location-wrapper").find(".dps-shipping-location-content").first().find("a.dps-shipping-remove").show(),a(".tips").tooltip(),c.removeAttr("id"),c.find("input,select").val(""),c.find("a.dps-shipping-remove").show()}),a(".dokan-shipping-location-wrapper").on("click","a.dps-shipping-remove",function(b){b.preventDefault(),a(this).closest(".dps-shipping-location-content").remove(),$dpsElm=a(".dokan-shipping-location-wrapper").find(".dps-shipping-location-content"),1==$dpsElm.length&&$dpsElm.first().find("a.dps-shipping-remove").hide()}),a(".dokan-shipping-location-wrapper").on("click","a.dps-add",function(b){b.preventDefault();var c=a(this).closest("tr").first().clone().appendTo(a(this).closest("table.dps-shipping-states"));c.find("input,select").val(""),c.find("a.dps-remove").show(),a(".tips").tooltip()}),a(".dokan-shipping-location-wrapper").on("click","a.dps-remove",function(b){b.preventDefault(),1==a(this).closest("table.dps-shipping-states").find("tr").length&&a(this).closest(".dps-shipping-location-content").find("td.dps_shipping_location_cost").show(),a(this).closest("tr").remove()}),a(".dokan-shipping-location-wrapper").on("change keyup",".dps_state_selection",function(){var b=a(this);""==b.val()||"-1"==b.val()?b.closest(".dps-shipping-location-content").find("td.dps_shipping_location_cost").show():b.closest(".dps-shipping-location-content").find("td.dps_shipping_location_cost").hide()}),a(".dokan-shipping-location-wrapper .dps_state_selection").trigger("change"),a(".dokan-shipping-location-wrapper .dps_state_selection").trigger("keyup"),$wrap=a(".dokan-shipping-location-wrapper").find(".dps-shipping-location-content"),1==$wrap.length&&$wrap.first().find("a.dps-shipping-remove").hide()})}(jQuery),function(a){a(document).ready(function(){a(".dokan-announcement-wrapper").on("click","a.remove_announcement",function(b){if(b.preventDefault(),confirm(dokan.delete_confirm)){var c=a(this),d={action:"dokan_announcement_remove_row",row_id:c.data("notice_row"),_wpnonce:dokan.nonce};c.closest(".dokan-announcement-wrapper-item").append('<span class="dokan-loading" style="position:absolute;top:2px; right:15px"> </span>');var e=a(".dokan-announcement-wrapper-item").length;a.post(dokan.ajaxurl,d,function(b){b.success?(c.closest(".dokan-announcement-wrapper-item").find("span.dokan-loading").remove(),c.closest(".dokan-announcement-wrapper-item").fadeOut(function(){a(this).remove(),1==e&&a(".dokan-announcement-wrapper").html(b.data)})):alert(dokan.wrong_message)})}})})}(jQuery),function(a){var b=a(".dokan-store-seo-wrapper"),c={init:function(){b.on("submit","form#dokan-store-seo-form",this.form.validate)},form:{validate:function(b){b.preventDefault();var d=a(this),e={action:"dokan_seo_form_handler",data:d.serialize()};return c.form.submit(e),!1},submit:function(b){var c=a("#dokan-seo-feedback");c.fadeOut(),a.post(dokan.ajaxurl,b,function(a){1==a.success?(c.html(a.data),c.removeClass("dokan-hide"),c.addClass("dokan-alert-success"),c.fadeIn()):(c.html(a.data),c.addClass("dokan-alert-danger"),c.removeClass("dokan-hide"),c.fadeIn())})}}};a(function(){c.init()})}(jQuery),function(a){var b=DokanValidateMsg;b.maxlength=a.validator.format(b.maxlength_msg),b.minlength=a.validator.format(b.minlength_msg),b.rangelength=a.validator.format(b.rangelength_msg),b.range=a.validator.format(b.range_msg),b.max=a.validator.format(b.max_msg),b.min=a.validator.format(b.min_msg),a.validator.messages=b,a(document).on("click","#dokan_store_tnc_enable",function(b){a(this).is(":checked")?a("#dokan_tnc_text").show():a("#dokan_tnc_text").hide()}).ready(function(b){a("#dokan_store_tnc_enable").is(":checked")?a("#dokan_tnc_text").show():a("#dokan_tnc_text").hide()})}(jQuery);