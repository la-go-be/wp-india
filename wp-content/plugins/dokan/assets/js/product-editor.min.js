!function(a){var b,c,d=a("#variants-holder"),e=a("#product_image_gallery"),f=a("#product_images_container ul.product_images"),g={init:function(){product_type="simple",a(".product-edit-container").on("click","input[type=checkbox]#_downloadable",this.downloadable),a(".product-edit-container").on("change","#_product_type",this.onChangeProductType),a(".product-edit-container").on("click","a.sale-schedule",this.showDiscountSchedule),a(".product-edit-new-container,.product-edit-container").on("click","._discounted_price",this.newProductDesign.showDiscount),a(".product-edit-new-container").on("change","input[type=checkbox].sale-schedule",this.newProductDesign.showDiscountSchedule),a(".product-edit-new-container").on("change","input[type=checkbox]#_manage_stock",this.newProductDesign.showManageStock),a(".product-edit-new-container").on("change","input[type=checkbox]#_required_shipping",this.newProductDesign.showShippingWrapper),a(".product-edit-new-container").on("change","input[type=checkbox]#_required_tax",this.newProductDesign.showTaxWrapper),a(".product-edit-new-container").on("change","input[type=checkbox]#_downloadable",this.newProductDesign.downloadable),a(".product-edit-new-container").on("change","input[type=checkbox]#_has_attribute",this.newProductDesign.showVariationSection),a("#product-attributes").on("click",".add-variant-category",this.variants.addCategory),a("#variants-holder").on("click",".box-header .row-remove",this.variants.removeCategory),a("#variants-holder").on("click",".item-action a.row-add",this.variants.addItem),a("#variants-holder").on("click",".item-action a.row-remove",this.variants.removeItem),a("body, #variable_product_options").on("click",".sale_schedule",this.variants.saleSchedule),a("body, #variable_product_options").on("click",".cancel_sale_schedule",this.variants.cancelSchedule),a("#variable_product_options").on("woocommerce_variations_added",this.variants.onVariantAdded),this.variants.dates(),this.variants.initSaleSchedule(),a(".save_attributes").on("click",this.variants.save),a("#dokan-product-images").on("click","a.add-product-images",this.gallery.addImages),a("#dokan-product-images").on("click","a.action-delete",this.gallery.deleteImage),a("#dokan-product-images").on("click","a.delete",this.gallery.deleteImage),this.gallery.sortable(),a(".product-edit-new-container, .product-edit-container").on("click","a.dokan-feat-image-btn",this.featuredImage.addImage),a(".product-edit-new-container, .product-edit-container").on("click","a.dokan-remove-feat-image",this.featuredImage.removeImage),a(".dokan-toggle-sidebar").on("click","a.dokan-toggle-edit",this.sidebarToggle.showStatus),a(".dokan-toggle-sidebar").on("click","a.dokan-toggle-save",this.sidebarToggle.saveStatus),a(".dokan-toggle-sidebar").on("click","a.dokan-toggle-cacnel",this.sidebarToggle.cancel),a(".dokan-variation-container").on("click","a.add_attribute_option",this.newProductDesign.addAttributeOption),a(".dokan-variation-container").on("click","button.remove_attribute",this.newProductDesign.removeAttributeOption),a(".dokan-variation-container").on("click","button.clear_attributes",this.newProductDesign.clearAttributeOptions),a(".product-edit-new-container").on("change","input[type=checkbox]#_create_variation",this.newProductDesign.createVariationSection),a(".product-edit-new-container").on("click","a.edit_variation",this.newProductDesign.editSingleVariation),a(".product-edit-new-container").on("click","a.remove_variation",this.newProductDesign.removeSingleVariation),a("body").on("click",".upload_image_button",this.newProductDesign.loadVariationImage),a("body, .product-edit-container").on("click","a.upload_file_button",this.fileDownloadable),a("body").on("click","a.add_single_attribute_option",this.newProductDesign.addSingleAttributeOption),a("body").on("click","button.remove_single_attribute",this.newProductDesign.removeSingleAttributeOption),a("body").on("click","tr.dokan-single-attribute-options button.clear_attributes",this.newProductDesign.clearSingleAttributeOptions),a("body").on("click","a.dokan_add_new_variation",this.newProductDesign.addSingleVariationOption),a("body").on("submit","form#dokan-single-attribute-form",this.newProductDesign.saveProductAttributes),a("body").on("submit","form#dokan-single-variation-form",this.newProductDesign.saveProductVariations),a("body").on("change","input.variable_is_downloadable",this.newProductDesign.showHideDownload),a("body").on("change","input.variable_manage_stock",this.newProductDesign.showHideMangeStock),a("body").on("change","input.variable_is_virtual",this.newProductDesign.showHideVirtual),a(".product-edit-new-container").on("click","a.dokan_add_new_attribute",this.newProductDesign.addExtraAttributeOption),a(".product-edit-new-container, #product-shipping").on("change","input[type=checkbox]#_overwrite_shipping",this.newProductDesign.shipping.showHideOverride),a(".product-edit-new-container").on("change","input[type=checkbox]#_disable_shipping",this.newProductDesign.shipping.disableOverride),a("#product-shipping").on("click","#_disable_shipping",this.shipping.disableOverride),a("body").on("click","a.insert-file-row",function(){return a(this).closest("table").find("tbody").append(a(this).data("row")),!1}),a("body").on("click","a.delete",function(){return a(this).closest("tr").remove(),!1}),this.loadTagChosen(),this.newProductDesign.shipping.showHideOverride(),this.newProductDesign.shipping.disableOverride(),this.shipping.disableOverride(),a("#_disable_shipping").trigger("change"),a("#_overwrite_shipping").trigger("change"),this.loadTagIt(),a("body").on("submit","form.dokan-product-edit-form",this.inputValidate)},inputValidate:function(b){return b.preventDefault(),""==a("#post_title").val().trim()?(a("#post_title").focus(),void a("div.dokan-product-title-alert").removeClass("dokan-hide")):(a("div.dokan-product-title-alert").hide(),-1==a("select.product_cat").val()?(a("select.product_cat").focus(),void a("div.dokan-product-cat-alert").removeClass("dokan-hide")):(a("div.dokan-product-cat-alert").hide(),a("input[type=submit]").attr("disabled","disabled"),void this.submit()))},loadTagChosen:function(){a("select.product_tags").chosen()},loadTagIt:function(){jQuery.fn.tagit&&a("input.dokan-attribute-option-values").each(function(b,c){a(this).tagit({allowSpaces:!0,availableTags:a(this).data("preset_attr").split(","),afterTagAdded:g.tagIt.afterTagAdded,afterTagRemoved:g.tagIt.afterTagRemoved,autocomplete:{delay:1,minLength:1}})})},downloadable:function(){a(this).prop("checked")?a(this).closest("aside").find(".dokan-side-body").removeClass("dokan-hide"):a(this).closest("aside").find(".dokan-side-body").addClass("dokan-hide")},showDiscountSchedule:function(b){b.preventDefault(),a(".sale-schedule-container").slideToggle("fast")},onChangeProductType:function(){var b=a("#_product_type").val();"simple"===b?(product_type="simple",a("aside.downloadable").removeClass("dokan-hide"),a(".show_if_variable").addClass("dokan-hide"),a(".show_if_simple").removeClass("dokan-hide")):(product_type="variable",a("aside.downloadable").addClass("dokan-hide"),a(".show_if_variable").removeClass("dokan-hide"),a(".show_if_simple").addClass("dokan-hide"))},tagIt:{afterTagAdded:function(a,b){g.reArrangeVariations()},afterTagRemoved:function(a,b){g.reArrangeVariations()}},makeVariation:function(){function a(e,f){for(var g=0,h=c[f].length;h>g;g++){var i=e.slice(0);i.push(c[f][g]),f==d?b.push(i):a(i,f+1)}}var b=[],c=arguments[0],d=c.length-1;return a([],0),b},reArrangeVariations:function(){if(a("input[type=checkbox]#_create_variation").is(":checked")){var b=[],c=[];if(a("tr.dokan-attribute-options").each(function(d){var e=a(this).find(".dokan-attribute-option-values").tagit("assignedTags"),f=a(this).find(".dokan-attribute-option-name").val();e.length?(c.push(f),b.push(e)):a(this).find(".dokan-attribute-option-name").val("")}),b.length){var d={variation_item:g.makeVariation(b),variation_title:c},e=wp.template("dokan-variations");a(".dokan-variation-content-wrapper").html(e(d))}else a(".dokan-variation-content-wrapper").html("")}},newProductDesign:{showDiscount:function(){var b=a(this),c=b.is(":checked"),d=a(".special-price-container");c?d.removeClass("dokan-hide"):d.addClass("dokan-hide")},showDiscountSchedule:function(b){a(this).is(":checked")?a(".sale-schedule-container").slideDown("fast"):a(".sale-schedule-container").slideUp("fast")},showManageStock:function(b){a(this).is(":checked")?a(".show_if_stock").slideDown("fast"):a(".show_if_stock").slideUp("fast")},showShippingWrapper:function(b){a(this).is(":checked")?a(".show_if_needs_shipping").slideDown("fast"):a(".show_if_needs_shipping").slideUp("fast")},showTaxWrapper:function(){a(this).is(":checked")?a(".show_if_needs_tax").slideDown("fast"):a(".show_if_needs_tax").slideUp("fast")},downloadable:function(){a(this).prop("checked")?(a(".dokan-product-shipping-tax").hasClass("woocommerce-no-tax")&&a(".dokan-product-shipping-tax").addClass("dokan-hide"),a(".hide_if_downloadable").hide(),a(this).closest("div").find(".dokan-side-body").removeClass("dokan-hide")):(a(".dokan-product-shipping-tax").hasClass("woocommerce-no-tax")&&a(".dokan-product-shipping-tax").removeClass("dokan-hide"),a(".hide_if_downloadable").show(),a(this).closest("div").find(".dokan-side-body").addClass("dokan-hide"))},showVariationSection:function(){a(this).is(":checked")?a(this).closest(".dokan-variation-container").find(".dokan-side-body").removeClass("dokan-hide"):a(this).closest(".dokan-variation-container").find(".dokan-side-body").addClass("dokan-hide")},addAttributeOption:function(b){b.preventDefault();var c=a(this),d=c.closest(".dokan-attribute-content-wrapper").find("select#predefined_attribute");if(""==d.val()){if(attribute_option=c.closest(".dokan-attribute-content-wrapper").find("tr.dokan-attribute-options").first().clone(),attribute_option.find("input").val(""),1==attribute_option.find("input.dokan-attribute-option-name-label").length){var e=attribute_option.find("input.dokan-attribute-option-name"),f=attribute_option.find("input.dokan-attribute-option-name-label");e.remove(),f.removeAttr("disabled data-attribute_name").attr("name","attribute_names[]").addClass("dokan-attribute-option-name").removeClass("dokan-attribute-option-name-label"),attribute_option.find('input[name="attribute_is_taxonomy[]"]').val("0")}attribute_option.insertBefore(a("table.dokan-attribute-options-table").find("tr.dokan-attribute-is-variations")),attribute_option.find("ul.tagit").remove();var h=attribute_option.find(".dokan-attribute-option-values");h.removeAttr("data-preset_attr").attr("value",""),h.tagit({allowSpaces:!0,afterTagAdded:g.tagIt.afterTagAdded,afterTagRemoved:g.tagIt.afterTagRemoved})}else{var i={action:"dokan_get_pre_attribute",name:d.val()},j=!0;if(c.closest(".dokan-attribute-content-wrapper").find(".dokan-attribute-option-name-label").each(function(b,c){a(c).data("attribute_name")==d.val()&&(alert(dokan.duplicates_attribute_messg),j=!1,d.val(""))}),!j)return;c.closest(".dokan-attribute-content-wrapper").find("span.dokan-loading").removeClass("dokan-hide"),a.post(dokan.ajaxurl,i,function(b){if(b.success){var e=b.data.trim();d.val(""),a(e).insertBefore(a("table.dokan-attribute-options-table").find("tr.dokan-attribute-is-variations")),a("input.dokan-attribute-option-values").each(function(b,c){a(this).tagit({allowSpaces:!0,availableTags:a(this).data("preset_attr").split(","),afterTagAdded:g.tagIt.afterTagAdded,afterTagRemoved:g.tagIt.afterTagRemoved,autocomplete:{delay:1,minLength:1}})}),c.closest(".dokan-attribute-content-wrapper").find("span.dokan-loading").addClass("dokan-hide")}})}},removeAttributeOption:function(b){b.preventDefault();var c=a(this),d=c.closest("tbody").find("tr.dokan-attribute-options").length;return 2>d?!1:(c.closest("tr").remove(),void g.reArrangeVariations())},clearAttributeOptions:function(b,c){b.preventDefault();var d=a(this),e=d.closest("tr.dokan-attribute-options").find("td input.dokan-attribute-option-values");e.tagit("removeAll"),e.focus(),console.log(e)},clearSingleAttributeOptions:function(b,c){b.preventDefault();var d=a(this),e=d.closest("tr.dokan-single-attribute-options").find("td input.dokan-single-attribute-option-values");e.tagit("removeAll"),a(e).focus(),console.log(e)},createVariationSection:function(){if(a(this).is(":checked"))a(".hide_if_variation").hide(),a("#_manage_stock").trigger("change"),g.reArrangeVariations(),a(this).hasClass("dokan_create_variation")&&a(".dokan-variation-remove-warning").slideUp();else if(a(".hide_if_variation").show(),a("#_manage_stock").trigger("change"),a(".dokan-variation-content-wrapper").html(""),a(this).hasClass("dokan_create_variation")){var b='<div class="dokan-alert dokan-alert-warning dokan-variation-remove-warning"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+dokan.variation_unset_warning+"</div>";a(this).closest("label").before(b).slideDown()}},editSingleVariation:function(b){b.preventDefault();var c=a(this),d=c.closest("tr").data("variation_data"),e=wp.template("dokan-single-variations"),f=e(d);a.magnificPopup.open({items:{src:f.trim(),type:"inline"},callbacks:{open:function(){g.variants.dates(),a(".sale_schedule").trigger("click"),a("input.variable_is_downloadable, input.variable_is_virtual, input.variable_manage_stock").change(),a("body").find("select.variation_select_fileld").each(function(b,c){var d=a(c).data("selected_data");d&&a(c).find("option").each(function(b,c){a(c).attr("value")==d&&a(c).attr("selected","selected")})}),a(".tips").tooltip()}}})},removeSingleVariation:function(b){if(b.preventDefault(),confirm(dokan.delete_confirm)){var c=a(this),d={action:"dokan_remove_single_variation_item",variation_id:c.data("variation_id")},e=window.location.href;a(".dokan-variation-container").addClass("dokan-blur-effect"),a(".dokan-variation-container").append('<div class="dokan-variation-loader"></div>'),a.post(dokan.ajaxurl,d,function(b){b.success&&a(".dokan-variation-container").load(e+" .dokan-variation-container",function(){a("#_create_variation").trigger("change"),a(".dokan-variation-container").removeClass("dokan-blur-effect"),a(".dokan-variation-container").remove(".dokan-variation-loader")})})}},showHideDownload:function(){a(this).closest(".woocommerce_variation").find(".show_if_variation_downloadable").hide(),a(this).is(":checked")&&a(this).closest(".woocommerce_variation").find(".show_if_variation_downloadable").show()},showHideMangeStock:function(){a(this).closest(".woocommerce_variation").find(".show_if_variation_manage_stock").hide(),a(this).is(":checked")&&a(this).closest(".woocommerce_variation").find(".show_if_variation_manage_stock").show()},showHideVirtual:function(){a(this).closest(".woocommerce_variation").find(".hide_if_variation_virtual").show(),a(this).is(":checked")&&a(this).closest(".woocommerce_variation").find(".hide_if_variation_virtual").hide()},loadVariationImage:function(b){b.preventDefault();var c,d=a(this),e=d.attr("rel"),f=d.closest(".upload_image");if(setting_variation_image=f,placeholder_iamge=f.find("span.variation_placeholder_image").data("placeholder_image"),setting_variation_image_id=e,b.preventDefault(),d.is(".dokan-img-remove"))setting_variation_image.find(".upload_image_id").val(""),setting_variation_image.find("img").attr("src",placeholder_iamge),setting_variation_image.find(".upload_image_button").removeClass("dokan-img-remove");else{if(c)return c.uploader.uploader.param("post_id",setting_variation_image_id),void c.open();wp.media.model.settings.post.id=setting_variation_image_id,wp.media.model.settings.type="dokan",c=wp.media.frames.variable_image=wp.media({title:"Choose an image",button:{text:"Set variation image"}}),c.on("select",function(){attachment=c.state().get("selection").first().toJSON(),setting_variation_image.find(".upload_image_id").val(attachment.id),setting_variation_image.find(".upload_image_button").addClass("dokan-img-remove"),setting_variation_image.find("img").attr("src",attachment.url),wp.media.model.settings.post.id=wp_media_post_id}),c.open()}},addExtraAttributeOption:function(b){b.preventDefault();var c=a(this),d={attribute_data:c.data("product_attributes"),attribute_taxonomies:c.data("predefined_attr")},e=wp.template("dokan-single-attribute"),f=e(d);a.magnificPopup.open({items:{src:f.trim(),type:"inline"},callbacks:{open:function(){a(".tips").tooltip();var b=a("body").find(".dokan-single-attribute-option-values");b.each(function(b,c){a(this).tagit({allowSpaces:!0,availableTags:a(this).data("preset_attr").split(","),afterTagAdded:g.tagIt.afterTagAdded,afterTagRemoved:g.tagIt.afterTagRemoved,autocomplete:{delay:1,minLength:1,appendTo:"div.white-popup"}})})}}})},addSingleAttributeOption:function(b){b.preventDefault();var c=a(this),d=c.closest("table.dokan-single-attribute-options-table").find("select#predefined_attribute");if(""==d.val()){if(attribute_option=c.closest("table.dokan-single-attribute-options-table").find("tr.dokan-single-attribute-options").first().clone(),attribute_option.find("input").val(""),1==attribute_option.find("input.dokan-single-attribute-option-name-label").length){var e=attribute_option.find("input.dokan-single-attribute-option-name"),f=attribute_option.find("input.dokan-single-attribute-option-name-label");e.remove(),f.removeAttr("disabled data-attribute_name").attr("name","attribute_names[]").addClass("dokan-single-attribute-option-name").removeClass("dokan-single-attribute-option-name-label"),attribute_option.find('input[name="attribute_is_taxonomy[]"]').val("0")}a("table.dokan-single-attribute-options-table").find("tbody").append(attribute_option),attribute_option.find("ul.tagit").remove();var h=attribute_option.find("input.dokan-single-attribute-option-values");h.removeAttr("data-preset_attr").attr("value",""),h.tagit({allowSpaces:!0,afterTagAdded:g.tagIt.afterTagAdded,afterTagRemoved:g.tagIt.afterTagRemoved})}else{var i={action:"dokan_get_pre_attribute",name:d.val(),from:"popup"},j=!0;if(c.closest("table.dokan-single-attribute-options-table").find(".dokan-single-attribute-option-name-label").each(function(b,c){a(c).data("attribute_name")==d.val()&&(alert(dokan.duplicates_attribute_messg),j=!1,d.val(""))}),!j)return;c.closest("table.dokan-single-attribute-options-table").find("span.dokan-loading").removeClass("dokan-hide"),a.post(dokan.ajaxurl,i,function(b){if(b.success){var e=b.data.trim();d.val(""),a("table.dokan-single-attribute-options-table").find("tbody").append(e),a("input.dokan-single-attribute-option-values").each(function(b,c){a(this).tagit({allowSpaces:!0,availableTags:a(this).data("preset_attr").split(","),afterTagAdded:g.tagIt.afterTagAdded,afterTagRemoved:g.tagIt.afterTagRemoved,autocomplete:{delay:1,minLength:1,appendTo:"div.white-popup"}})}),c.closest(".dokan-single-attribute-options-table").find("span.dokan-loading").addClass("dokan-hide")}})}},removeSingleAttributeOption:function(b){b.preventDefault(),b.preventDefault();var c=a(this),d=c.closest("tbody").find("tr").length;return 2>d?!1:void c.closest("tr").remove()},saveProductAttributes:function(b){b.preventDefault();var c=a(this),d={action:"dokan_save_attributes_options",formdata:a(this).serialize()},e=window.location.href;c.find(".dokan-save-single-attr-loader").removeClass("dokan-hide"),a.post(dokan.ajaxurl,d,function(b){b.success&&(a(".dokan-variation-container").addClass("dokan-blur-effect"),a(".dokan-variation-container").append('<div class="dokan-variation-loader"></div>'),a.magnificPopup.close(),a(".dokan-variation-container").load(e+" .dokan-variation-container",function(){a("#_create_variation").trigger("change"),a(".dokan-variation-container").removeClass("dokan-blur-effect"),a(".dokan-variation-container").remove(".dokan-variation-loader")}))})},addSingleVariationOption:function(b){b.preventDefault();var c=a(this),d={action:"dokan_add_new_variations_options",post_id:c.data("post_id"),menu_order:c.closest(".dokan-variation-container").find("table.dokan-variations-table tbody tr").size()},e=window.location.href;c.closest(".dokan-variation-action-wrapper").find(".dokan-loading").removeClass("dokan-hide"),a(".dokan-variation-container").addClass("dokan-blur-effect"),a(".dokan-variation-container").append('<div class="dokan-variation-loader"></div>'),a.post(dokan.ajaxurl,d,function(b){a(".dokan-variation-container").load(e+" .dokan-variation-container",function(){a("#_create_variation").trigger("change"),c.closest(".dokan-variation-action-wrapper").find(".dokan-loading").addClass("dokan-hide"),a(".dokan-variation-container").removeClass("dokan-blur-effect"),a(".dokan-variation-container").remove(".dokan-variation-loader")})})},saveProductVariations:function(b){b.preventDefault();var c=a(this),d={action:"dokan_save_variations_options",formdata:a(this).serialize()},e=window.location.href;c.find(".dokan-loading").removeClass("dokan-hide"),a.post(dokan.ajaxurl,d,function(b){b.success&&(a(".dokan-variation-container").addClass("dokan-blur-effect"),a(".dokan-variation-container").append('<div class="dokan-variation-loader"></div>'),a.magnificPopup.close(),a(".dokan-variation-container").load(e+" .dokan-variation-container",function(){a("#_create_variation").trigger("change"),a(".dokan-variation-container").removeClass("dokan-blur-effect"),a(".dokan-variation-container").remove(".dokan-variation-loader")}))})},shipping:{showHideOverride:function(){a("#_overwrite_shipping").is(":checked")?a(".show_if_override").show():a(".show_if_override").hide()},disableOverride:function(){a("#_disable_shipping").is(":checked")?(a(".show_if_needs_shipping").show(),a("#_overwrite_shipping").trigger("change")):a(".show_if_needs_shipping").hide()}}},variants:{addCategory:function(b){b.preventDefault();var c=a("#_product_type").val(),e=a(this).closest("p.toolbar").find("select.select-attribute").val(),f=a(".inputs-box").length;if(""==e){var g=_.template(a("#tmpl-sc-category").html(),{row:f});d.append(g).children(":last").hide().fadeIn()}else{var h={row:f,name:e,type:c,action:"dokan_pre_define_attribute"};a("#product-attributes .toolbar").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),a.post(dokan.ajaxurl,h,function(b){b.success&&d.append(b.data).children(":last").hide().fadeIn(),a("#product-attributes .toolbar").unblock()})}"simple"===product_type&&d.find(".show_if_variable").hide()},removeCategory:function(b){b.preventDefault(),confirm("Sure?")&&a(this).parents(".inputs-box").fadeOut(function(){a(this).remove()})},addItem:function(b){b.preventDefault();var c=a(this),d=c.closest(".inputs-box"),e=c.closest("ul.option-couplet"),f=e.find("li").length,g=d.data("count"),h=_.template(a("#tmpl-sc-category-item").html());c.closest("li").after(h({row:g,col:f}))},removeItem:function(b){b.preventDefault();var c=a(this).parents("ul").find("li");c.length>1&&a(this).parents("li").fadeOut(function(){a(this).remove()})},save:function(){var b={post_id:a(this).data("id"),data:a(".woocommerce_attributes").find("input, select, textarea").serialize(),action:"dokan_save_attributes"},c=window.location.toString();a("#variants-holder").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),a.post(ajaxurl,b,function(b){a("#variable_product_options").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),a("#variable_product_options").load(c+" #variable_product_options_inner",function(){a("#variable_product_options").unblock()}),a("input.variable_is_downloadable, input.variable_is_virtual, input.variable_manage_stock").trigger("change"),a("#variants-holder").unblock()})},initSaleSchedule:function(){a(".sale_price_dates_fields").each(function(){var b=a(this),c=!1,d=b.closest("div, table");b.find("input").each(function(){""!=a(this).val()&&(c=!0)}),c?(d.find(".sale_schedule").hide(),d.find(".sale_price_dates_fields").show()):(d.find(".sale_schedule").show(),d.find(".sale_price_dates_fields").hide())})},saleSchedule:function(){var b=a(this).closest("div, table");return a(this).hide(),b.find(".cancel_sale_schedule").show(),b.find(".sale_price_dates_fields").show(),!1},cancelSchedule:function(){var b=a(this).closest("div, table");return a(this).hide(),b.find(".sale_schedule").show(),b.find(".sale_price_dates_fields").hide(),b.find(".sale_price_dates_fields").find("input").val(""),!1},dates:function(){var b=a(".sale_price_dates_fields input").datepicker({defaultDate:"",dateFormat:"yy-mm-dd",numberOfMonths:1,onSelect:function(c){var d=a(this).is("#_sale_price_dates_from, .sale_price_dates_from")?"minDate":"maxDate",e=a(this).data("datepicker"),f=a.datepicker.parseDate(e.settings.dateFormat||a.datepicker._defaults.dateFormat,c,e.settings);b.not(this).datepicker("option",d,f)}})},onVariantAdded:function(){g.variants.dates()}},gallery:{addImages:function(a){a.preventDefault();var c=e.val();return b?void b.open():(b=wp.media.frames.downloadable_file=wp.media({title:"Add Images to Product Gallery",button:{text:"Add to gallery"},multiple:!0}),b.on("select",function(){var a=b.state().get("selection");a.map(function(a){a=a.toJSON(),a.id&&(c=c?c+","+a.id:a.id,f.append('                                <li class="image" data-attachment_id="'+a.id+'">                                    <img src="'+a.url+'" />                                    <a href="#" class="action-delete">&times;</a>                                </li>'))}),e.val(c)}),void b.open())},deleteImage:function(b){b.preventDefault(),a(this).closest("li.image").remove();var c="";return a("#product_images_container ul li.image").css("cursor","default").each(function(){var b=a(this).attr("data-attachment_id");c=c+b+","}),e.val(c),!1},sortable:function(){f.sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"dokan-sortable-placeholder",start:function(a,b){b.item.css("background-color","#f6f6f6")},stop:function(a,b){b.item.removeAttr("style")},update:function(b,c){var d="";a("#product_images_container ul li.image").css("cursor","default").each(function(){var a=jQuery(this).attr("data-attachment_id");d=d+a+","}),e.val(d)}})}},featuredImage:{addImage:function(b){b.preventDefault();var d=a(this);return c?void c.open():(c=wp.media({title:"Upload featured image",button:{text:"Set featured image"}}),c.on("select",function(){var a=c.state().get("selection");a.map(function(a){a=a.toJSON(),d.siblings("input.dokan-feat-image-id").val(a.id);var b=d.closest(".instruction-inside"),c=b.siblings(".image-wrap");c.find("img").attr("src",a.url),b.addClass("dokan-hide"),c.removeClass("dokan-hide")})}),void c.open())},removeImage:function(b){b.preventDefault();var c=a(this),d=c.closest(".image-wrap"),e=d.siblings(".instruction-inside");e.find("input.dokan-feat-image-id").val("0"),d.addClass("dokan-hide"),e.removeClass("dokan-hide")}},fileDownloadable:function(b){b.preventDefault();var c,d=a(this);return c?void c.open():(c=wp.media({title:"Choose a file",button:{text:"Insert file URL"},multiple:!0}),c.on("select",function(){var a=c.state().get("selection");a.map(function(a){a=a.toJSON(),d.closest("tr").find("input.wc_file_url").val(a.url)})}),c.on("ready",function(){c.uploader.options.uploader.params={type:"downloadable_product"}}),void c.open())},sidebarToggle:{showStatus:function(b){var c=a(this).siblings(".dokan-toggle-select-container");return c.is(":hidden")&&(c.slideDown("fast"),a(this).hide()),!1},saveStatus:function(b){var c=a(this).closest(".dokan-toggle-select-container");c.slideUp("fast"),c.siblings("a.dokan-toggle-edit").show();var d=a("option:selected",c.find("select.dokan-toggle-select")).text();return c.siblings(".dokan-toggle-selected-display").html(d),!1},cancel:function(b){var c=a(this).closest(".dokan-toggle-select-container");return c.slideUp("fast"),c.siblings("a.dokan-toggle-edit").show(),!1}},shipping:{disableOverride:function(){a("#_disable_shipping").is(":checked")?a(".hide_if_disable").hide():(a(".hide_if_disable").show(),g.newProductDesign.shipping.showHideOverride())}}};a(function(){g.init(),a("#_product_type").trigger("change"),a(".sale-schedule").trigger("change"),a("#_manage_stock").trigger("change"),a("#_required_shipping").trigger("change"),a("#_disable_shipping").trigger("change"),a("#_required_tax").trigger("change"),a("#_has_attribute").trigger("change"),a("#_create_variation").trigger("change"),a("input[type=checkbox].dokan_create_variation").trigger("change"),a("#_downloadable").trigger("change"),a("input.variable_is_downloadable, input.variable_is_virtual, input.variable_manage_stock").change()})}(jQuery);